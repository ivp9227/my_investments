{% extends 'base.html' %}

{% block content %}
{{ super() }}

<div class="form-container" style="max-width: 450px; margin: 50px auto 0; padding: 20px; border: 1px solid #ccc; border-radius: 10px; background-color: wheat; overflow: hidden;">
  <h2 class="text-center mb-4">Покупка</h2>
  <form method="POST" autocomplete="off">

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="broker_id" class="form-label mb-0">Брокерский счёт</label>
      </div>
      <div class="col-7">
        <select class="form-select form-select-sm" id="broker_id" name="broker_id" required>
        <option value="" disabled selected>выберите брокерский счёт</option>
        {% for broker in brokers %}
          <option value="{{ broker.id }}">{{ broker.broker }}</option>
        {% endfor %}
        </select>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="asset_type" class="form-label mb-0">Тип актива</label>
      </div>
      <div class="col-7">
        <select class="form-select form-select-sm" id="asset_type" name="asset_type" required>
        <option value="" disabled selected>выберите тип актива</option>
        {% for asset_type in asset_types %}
          <option value="{{ asset_type.id }}">{{ asset_type.asset_type }}</option>
        {% endfor %}
        </select>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="asset_name" class="form-label mb-0">Наименование</label>
      </div>
      <div class="col-7">
        <input type="text" class="form-control form-control-sm" id="asset_name" name="asset_name" required>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="isin" class="form-label mb-0">ISIN</label>
      </div>
      <div class="col-7">
        <input type="text" class="form-control form-control-sm" id="isin" name="isin" required>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="ticker" class="form-label mb-0">Ticker</label>
      </div>
      <div class="col-4">
        <input type="text" class="form-control form-control-sm" id="ticker" name="ticker">
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="purchase_date" class="form-label mb-0">Дата покупки</label>
      </div>
      <div class="col-4">
        <input type="date" class="form-control form-control-sm" id="purchase_date" name="purchase_date" required>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="cost_one_unit" class="form-label mb-0">Стоимость 1 ед.</label>
      </div>
      <div class="col-4">
        <input type="number" step="0.0000000001" class="form-control form-control-sm" id="cost_one_unit" name="cost_one_unit" required>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="quantity" class="form-label mb-0">Количество</label>
      </div>
      <div class="col-4">
        <input type="number" class="form-control form-control-sm" id="quantity" name="quantity" required>
      </div>
    </div>

    <div class="row mb-2 align-items-center">
      <div class="col-5">
        <label for="brokerage_fee" class="form-label mb-0">Комиссия брокера</label>
      </div>
      <div class="col-4">
        <input type="number" step="0.01" class="form-control form-control-sm" id="brokerage_fee" name="brokerage_fee" required>
      </div>
    </div>

    <div class="flash-messages" style="margin: 25px auto 20px; width: 70%;">
      {% for category, msg in get_flashed_messages(with_categories=true) %}
        <div class="flash-message flash-{{ category }}">
          {{ msg }}
        </div>
      {% endfor %}
    </div>

    <div class="d-grid mt-4">
      <button type="submit" class="btn btn-primary col-3 btn-sm ms-auto">Купить</button>
    </div>
  </form>
</div>

{% endblock %}